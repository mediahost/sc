(function(y,J,e,j){var E={},z=[],n,k,x=true,t=0,H,u=true,c=true,B=0,L=false,w=y('<div id="jpwOverlay"></div>'),r=y('<div id="jpWalkthrough"></div>'),l=y('<div id="jpwTooltip"></div>');var C={isActive:function(){return !!L},index:function(O){if(typeof O!=="undefined"){B=O}return B},init:function(O){O=y.extend(true,{},y.fn.pagewalkthrough.defaults,O);var P=this;if(!O.name){throw new Error("Must provide a unique name for a tour")}this.first().data("jpw",O);O._element=this;return this.each(function(Q){O=O||{};O.elementID=O.name;E[O.name]=O;z.push(O.name);if(O.onLoad){t++}if(t===1&&c){k=O.name;n=E[k];c=false}if((Q+1===P.length&&t===0)){k=O.name;n=E[z[0]];x=false}})},renderOverlay:function(){if(t>1){p("Warning: Only 1st walkthrough will be shown onLoad as default")}H=f("_walkthrough-"+k);if(typeof H==="undefined"){L=true;if(!(F())){return}o();b("jpwClose","body");setTimeout(function(){if(g()&&u){if(!I()){return}}},100)}else{h(E)}},restart:function(O){if(g()){return}B=0;if(!(G(O))){return}if(!(F(O))){return}o()},close:function(){var O=n;K();if(typeof O.onClose==="function"){O.onClose.call(this)}B=0;u=true;L=false;i("_walkthrough-"+k,0,365);H=f("_walkthrough-"+k);w.fadeOut("slow",function(){y(this).remove()});r.fadeOut("slow",function(){y(this).html("").remove()});y("#jpwClose").fadeOut("slow",function(){y(this).remove()})},show:function(O,P){P=O==null?O:P;O=O||this.first().data("jpw").name;n=E[this.first().data("jpw").name];if((O===k&&L)||!(F(P))){return}L=true;u=true;if(!(v())){return}o();b("jpwClose","body");if(g()&&u){if(!I()){return}}},next:function(O){u=false;if(d()){return}if(!K(O)){return}B=parseInt(B,10)+1;if(!F(O)){C.next()}o("next")},prev:function(O){if(g()){return}if(!K(O)){return}B=parseInt(B,10)-1;if(!F(O)){C.prev()}o("prev")},getOptions:function(P){var Q;if(P){Q={};Q=n}else{Q=[];for(var O in E){Q.push(E[O])}}return Q},refresh:function(){o("next")}};function o(S){var R=n,U=R.steps[B],Q=R._element.find(U.wrapper),P=m(Q),T,O;if(U.popup.type!=="modal"&&!Q.length){if(U.popup.fallback==="skip"||typeof U.popup.fallback==="undefined"){C[S]();return}U.popup.type=U.popup.fallback}T=P[0].scrollHeight-P.outerHeight();O=U.popup.type==="modal"?0:Math.floor(Q.offset().top-(y(J).height()/2)+P.scrollTop());if(P.scrollTop()!==O&&((P.scrollTop()===T&&O<T)||(O<=0&&P.scrollTop()>0)||(O>0))){r.addClass("jpw-scrolling");l.fadeOut("fast");P.animate({scrollTop:O},R.steps[B].scrollSpeed,s)}else{s()}}function s(){r.removeClass("jpw-scrolling");var P=n,R=P.steps[B],O,S,Q;P.steps[B]=y.extend(true,{},y.fn.pagewalkthrough.defaults.steps[0],R);O=P._element.find(R.wrapper);S=m(O);w.show();if(R.popup.type!=="modal"&&R.popup.type!=="nohighlight"){r.html("");if(R.wrapper===""||typeof R.wrapper==="undefined"){p('Your walkthrough position is: "'+R.popup.type+'" but wrapper is empty or undefined. Please check your "'+k+'" wrapper parameter.');return}Q=S.outerHeight()-O.offset().top+S.offset().top+S.scrollTop();Q=Q<=0?O.outerHeight():Q;w.appendTo(r);y("<div>").addClass("overlay-hole").height(Math.min(Q,O.outerHeight())+40).width(O.outerWidth()+40).css({padding:"20px",position:"absolute",top:O.offset().top-20,left:O.offset().left-20,"z-index":999998,"box-shadow":"0 0 1px 10000px rgba(0, 0, 0, 0.6)"}).append(y("<div>").css({position:"absolute",top:0,bottom:0,left:0,right:0})).appendTo(r);if(y("#jpWalkthrough").length){y("#jpWalkthrough").remove()}r.appendTo("body").show();l.show();N()}else{if(R.popup.type==="modal"){if(y("#jpWalkthrough").length){y("#jpWalkthrough").remove()}M()}else{if(y("#jpWalkthrough").length){y("#jpWalkthrough").remove()}}}b("jpwPrevious");b("jpwNext");b("jpwFinish")}function M(){var Q=n,R=Q.steps[B];w.appendTo("body").show().removeClass("transparent");var P=D(parseInt(R.popup.contentRotation,10));l.css({position:"absolute",left:"50%",top:"25%","margin-left":-(parseInt(R.popup.width,10)+60)/2+"px","z-index":"999999"});var O=y('<div id="tooltipTop"><div id="topLeft"></div><div id="topRight"></div></div><div id="tooltipInner"></div><div id="tooltipBottom"><div id="bottomLeft"></div><div id="bottomRight"></div></div>');r.html("");l.html("").append(O).wrapInner(y("<div />",{id:"tooltipWrapper",style:"width:"+a(parseInt(R.popup.width,10)+30)})).append('<div id="bottom-scratch"></div>').appendTo(r);r.appendTo("body");l.show();y("#tooltipWrapper").css(P);y("#tooltipInner").append(A(R)).show();r.show()}function N(){var O=n,P=O.steps[B];var X,Q,T,W,U=y("#jpWalkthrough .overlay-hole").outerWidth(),aa=y("#jpWalkthrough .overlay-hole").outerHeight(),V=y("#jpWalkthrough .overlay-hole").offset().top,R=y("#jpWalkthrough .overlay-hole").offset().left,Z=30;var S=(typeof P.popup.contentRotation==="undefined"||parseInt(P.popup.contentRotation,10)===0)?q():D(parseInt(P.popup.contentRotation,10));if(y("#jpwOverlay").length){y("#jpwOverlay").addClass("transparent")}var Y=y('<div id="tooltipTop"><div id="topLeft"></div><div id="topRight"></div></div><div id="tooltipInner"></div><div id="tooltipBottom"><div id="bottomLeft"></div><div id="bottomRight"></div></div>');l.html("").css({"margin-left":"0","margin-top":"0",position:"absolute","z-index":"999999"}).append(Y).wrapInner(y("<div />",{id:"tooltipWrapper",style:"width:"+a(parseInt(P.popup.width,10)+30)})).appendTo(r);r.appendTo("body").show();y("#tooltipWrapper").css(S);y("#tooltipInner").append(A(P)).show();l.append('<span class="'+P.popup.position+'">&nbsp;</span>');switch(P.popup.position){case"top":X=V-(l.height()+(Z/2))+parseInt(P.popup.offsetVertical,10)-86;Q=(R+(U/2))-(l.width()/2)-5+parseInt(P.popup.offsetHorizontal,10);W=(l.width()/2)-Z+parseInt(P.popup.offsetArrowHorizontal,10);T=(P.popup.offsetArrowVertical)?parseInt(P.popup.offsetArrowVertical,10):"";break;case"right":X=V-(Z/2)+parseInt(P.popup.offsetVertical,10);Q=R+U+(Z/2)+parseInt(P.popup.offsetHorizontal,10)+105;T=Z+parseInt(P.popup.offsetArrowVertical,10);W=(P.popup.offsetArrowHorizontal)?parseInt(P.popup.offsetArrowHorizontal,10):"";break;case"bottom":X=V+aa+parseInt(P.popup.offsetVertical,10)+86;Q=(R+(U/2))-(l.width()/2)-5+parseInt(P.popup.offsetHorizontal,10);W=((l.width()/2)-Z)+parseInt(P.popup.offsetArrowHorizontal,10);T=(P.popup.offsetArrowVertical)?parseInt(P.popup.offsetArrowVertical,10):"";break;case"left":X=V-(Z/2)+parseInt(P.popup.offsetVertical,10);Q=R-l.width()-(Z)+parseInt(P.popup.offsetHorizontal,10)-105;T=Z+parseInt(P.popup.offsetArrowVertical,10);W=(P.popup.offsetArrowVertical)?parseInt(P.popup.offsetArrowHorizontal,10):"";break}y("#jpwTooltip span."+P.popup.position).css({top:a(T),left:a(W)});l.css({top:a(X),left:a(Q)});r.show()}function A(Q){var O=Q.popup.content,P;try{P=y("body").find(O).html()}catch(R){}return P||O}function b(Q,O){if(y("#"+Q).length){return}var P=n.buttons[Q];O=O||"#tooltipWrapper";if(!P){return}if((typeof P.show==="function"&&!P.show())||!P.show){return}y(O).append(y("<a />",{id:Q,html:P.i18n}))}function h(O){for(var P=0;P<z.length;P++){if(typeof(O[z[P]].onCookieLoad)==="function"){O[z[P]].onCookieLoad.call(this)}}return false}function K(P){var O=n;if(typeof O.steps[B].onLeave==="function"){if(!O.steps[B].onLeave.call(this,P,B)){return false}}return true}function F(P){var O=n;if(typeof O.steps[B].onEnter==="function"){return O.steps[B].onEnter.call(this,P,B)}return true}function G(P){var O=n;L=true;C.restart(P);if(typeof O.onRestart==="function"){if(!O.onRestart.call(this)){return false}}return true}function v(){var O=n||{};B=0;if(typeof(O.onBeforeShow)==="function"){if(!O.onBeforeShow.call(this)){return false}}return true}function I(){var O=n;B=0;if(typeof(O.onAfterShow)==="function"){if(!O.onAfterShow.call(this)){return false}}return true}function p(O){if(J.console&&J.console.log){J.console.log(O)}}function q(){var O={"-webkit-transform":"none","-moz-transform":"none","-o-transform":"none",filter:"none","-ms-transform":"none"};return O}function D(V){var R,Q,U,S,P,O;P=Math.PI*2/360;O=V*P;R=Math.cos(O);Q=Math.sin(O);U=Math.sin(O);S=Math.cos(O);var T={"-webkit-transform":"rotate("+parseInt(V,10)+"deg)","-moz-transform":"rotate("+parseInt(V,10)+"deg)","-o-transform":"rotate("+parseInt(V,10)+"deg)","-ms-transform":"rotate("+parseInt(V,10)+"deg)"};return T}function a(O){if(typeof O==="string"){if(O.toLowerCase().indexOf("px")===-1){return O+"px"}else{return O}}else{return O+"px"}}function i(O,R,Q){var S=new Date();S.setDate(S.getDate()+Q);var P=encodeURIComponent(R)+((Q==null)?"":"; expires="+S.toUTCString());e.cookie=[O,"=",P].join("")}function f(P){var Q,O,S,R=e.cookie.split(";");for(Q=0;Q<R.length;Q++){O=R[Q].substr(0,R[Q].indexOf("="));S=R[Q].substr(R[Q].indexOf("=")+1);O=O.replace(/^\s+|\s+$/g,"");if(O===P){return decodeURIComponent(S)}}}function d(){return B===(n.steps.length-1)}function g(){return B===0}function m(Q){if(!(Q instanceof y)){Q=y(Q)}Q=Q.first();var P=Q.css("position"),O=P==="absolute",R=Q.parents().filter(function(){var S=y(this);if(O&&S.css("position")==="static"){return false}return(/(auto|scroll)/).test(S.css("overflow")+S.css("overflow-y")+S.css("overflow-x"))}).eq(0);return P==="fixed"?y():!R.length?y("body"):R}y(e).on("click","#jpwClose, #jpwFinish",C.close);y(e).on("click","#jpwNext",function(){y.pagewalkthrough("next")});y(e).on("click","#jpwPrevious",function(){y.pagewalkthrough("prev")});y(e).on("click","#jpwOverlay, #jpwTooltip",function(O){O.stopPropagation();O.stopImmediatePropagation()});y.pagewalkthrough=y.fn.pagewalkthrough=function(O){if(C[O]){return C[O].apply(this,[].slice.call(arguments,1))}else{if(typeof O==="object"||!O){C.init.apply(this,arguments);if(x&&t<2){setTimeout(function(){C.renderOverlay()},500)}}else{y.error("Method "+O+" does not exist on jQuery.pagewalkthrough")}}};y.fn.pagewalkthrough.defaults={steps:[{wrapper:"",popup:{content:"",type:"modal",position:"top",offsetHorizontal:0,offsetVertical:0,offsetArrowHorizontal:0,offsetArrowVertical:0,width:"320",contentRotation:0},autoScroll:true,scrollSpeed:1000,lockScrolling:false,onEnter:null,onLeave:null}],name:null,onLoad:true,onBeforeShow:null,onAfterShow:null,onRestart:null,onClose:null,onCookieLoad:null,buttons:{jpwClose:{i18n:"Click here to close",show:true},jpwNext:{i18n:"Next &rarr;",show:function(){return !d()}},jpwPrevious:{i18n:"&larr; Previous",show:function(){return !g()}},jpwFinish:{i18n:"Finish &#10004;",show:function(){return d()}}}}}(jQuery,window,document));